## Materials and methods {.page_break_before}

### Use cases in the life sciences
We evaluated FAIRness for two real use-cases from our department where researchers retrieve information from a repository to answer their research question.
Use-case name used throughout the paper, research question, and repository or database investigated are:  

- *Parkinsons_AE*: What are the differentially expressed genes between normal subjects and subjects with Parkinson's diseases in the brain frontal lobe?
  To answer this question, the researcher looked for a dataset in ArrayExpress, a repository for microarray gene expression data based at the European Bioinformatics Institute (EBI), United Kingdom [@doi:10.1093/nar/gkg091];
- *NBIA_GEO*: What is the function of mutation of WDR45 protein in the brain?
  In this case, the researcher looked for a dataset to analyze in Gene Expression Onmibus (GEO), a repository containing gene expression and other functional genomics data hosted at the National Center for Biotechnology Information (NCBI), United States [@doi:10.1093/nar/30.1.207].
<!--
- *TiO2_ENM*: What are the concentrations of titanium dioxide that kill cells?
  The fictitious researcher looked for an answer in eNanoMapper, a database containing physical, chemical, and biological identity of nanomaterials [@doi:10.3762/bjnano.6.165];
- *Caffeine_ChEBI*: What are the biological roles of caffeine?
  In this case, the fictitious researcher looked data in ChEBI (Chemical Entities of Biological Interest), a database containing chemical entities of biological interest hosted at EBI [@doi:10.1093/nar/gkm791].
-->

### What is *data* and what is *metadata*?
The FAIR guidelines recursively use the terminology *data*, *metadata*, and  *(meta)data*. <!-- (Table @tbl:maturity_indicators)-->  
<!-- % , to allow certain degree of interpretation for the user [3] - [3]seminal or mons -->
For our computational implementation, we needed precise definitions of these terms.
Accordingly to the Merrian-Webster online dictionary, *data* are "information in digital form that can be transmitted or processed" [@url:https://www.merriam-webster.com/dictionary/data]
whereas *metadata* are "data that provides information about other data" [@url:https://www.merriam-webster.com/dictionary/metadata].
Following these definitions, we considered the answer to the research question as *data*, and  the extra information provided in the database about *data* as *metadata*.
In addition, we divided *metadata* (M) in subcategories according to the requirements of the FAIR guidelines (indicated with their enumeration):

- M(F2): Information that allows researchers to find the dataset s/he looks for. It coincides with the keywords used in the search;
- M(F3): Data identifier in the repository;  
- M(I3): Reference to other metadata;
- M(R1): Further information about data content, other than the search keywords;
- M(R1.1): Data license;
- M(R1.2): Data provenance: author name, publication title, and one author's email address.
<!--	%See https://blog.datacite.org/exposing-doi-metadata-provenance/ with DOI https://doi.org/10.5438/wy92-xj57 -->

Metadata corresponding to guidelines F2 and R1 change with the research question, while the remaining metadata are independent from the research question.
We did not define M(1.3) as it requires community consensus.
In all cases, we assumed that *data* and *metadata* were hosted in the same repository.


### Calculating FAIR maturity indicators  
Because the FAIR guidelines stress on the importance of *data* and *metadata* being "machine-readable",
we collected information about datasets and repositories via application programming interface (API) wherever possible.  
We retrieved information from three different sources:   

- Repositories (ArrayExpress and Gene Expression Omnibus):
  We programmatically queried each repository using the same keywords that researchers had used in their manual query.
  From the obtained metadata, we retrieved information to calculate maturity indicators for the principles F2, F3, I1, I3, R1, and R12;
- Registry of repository:
  We queried [re3data.org](www.re3data.org), a registry containing information about more than 2000 data repositories from various disciplines.
  We used the retrieved  information to computed the maturity indicators for the principles F1, A2, and R12;   
- Searchable resource:
  We queried [Google Dataset Search](https://toolbox.google.com/datasetsearch), an emerging search engine specific for datasets, to quantify the principle F4.


The output of queries consisted of xml structured information, which we vectorized for easier string finding.
Details about the computation of each specific maturity indicator are in Table <a href="#maturity_indicators">2</a> and in the Jupyter notebook (interactive on binder).
To each maturity indicator, we assigned value 1 if the criterion was satisfied, 0 in the opposite case.
The only exception is the maturity indicator related to F2, which we calculated as the ratio between the number of keywords in the dataset metadata and the total number of keywords used by the researcher in the manual query.

<!--We represented the state of maturity indicators using balloon plots (Fig. @fig:outcome_comparison), where the area of each point corresponds to the level of maturity indicator.-->



<a name="maturity_indicators"></a>
<table style="width:100%;">
<caption><span>Table 2:</span>
FAIR principles and evaluation criteria used by the promoters, a qualitative analysis, a quantitative calculation, and our approach.  
In our approach, *dataset* metadata refers to metadata retrieved from ArrayExpress and Gene Expression Omnibus, whereas *registry* metadata to metadata retrieved from re3data.  
Acronyms: GUID = Globally Unique IDentifier, A = automatic information retrieval, M = manual information retrieval.
</caption>

<colgroup>
<col style="width: 19%" /> <!-- Principle-->
<col style="width: 19%" /> <!-- Wilkinson -->
<col style="width: 19%" /> <!-- Dunning -->
<col style="width: 19%" /> <!-- Weber-->
<col style="width: 19%" /> <!-- Our approach-->
</colgroup>

<thead>
<tr class="header">
<th>
FAIR principle [@tag:tag_wilkinson_fair]
</th>
<th>
Wilkinson et al. [@tag:tag_wilkinson_mi]
</th>
<th>
Dunning et al. [@tag:tag_dunning]
</th>
<th>
Weber et al. [@tag:tag_weber]
</th>
<th>
Our approach
</th>
</tr>
</thead>

<tbody>

<!-- F1 -->
<tr class="odd">
<td>
F1: (meta)data are assigned a globally unique and persistent identifier
</td>
<td>
The GUID matches a scheme that is globally unique and persistent in FAIRsharing
</td>
<td>
Persistent identifier is DOI or similar
</td>
<td>
Pass
</td>
<td>
"doi" icon is enabled in www.re3data.org (M)
</td>
</tr>

<!-- F2 -->
<tr class="even">
<td>
F2: data are described with rich metadata (defined by R1 below)
</td>
<td>
Metadata contains “structured” elements (micrograph, JSON) or linked data (JSON-LD, RDFa)
</td>
<td>
Title, creator, date, contributors, keywords, temporal and spatial coverage
</td>
<td>
Q <sub>geo</sub>, Q <sub>chrono</sub>
</td>
<td>
Search keywords are in *dataset* metadata (A)
</td>
</tr>

<!-- F3 -->
<tr class="odd">
<td>
F3: metadata clearly and explicitly include the identifier of the data it describes
</td>
<td>
Metadata contains both its own GUID and the data GUID
</td>
<td>
DOI of data is in metadata
</td>
<td>
Pass
</td>
<td>
*Dataset* metadata contains dataset ID (A)
</td>
</tr>

<!-- F4 -->
<tr class="even">
<td>
F4: (meta)data are registered or indexed in a searchable resource
</td>
<td>
The digital resource can be found using web-based search engines
</td>
<td>
Dataset title found in google.com or duckduckgo.com
</td>
<td>
Pass
</td>
<td>
Dataset title found in Google Dataset Search (A)
</td>
</tr>

<!-- A1 -->
<tr class="odd">
<td>
A.1 (meta)data are retrievable by their identifier using a standardized communications protocol
</td>
<td>
N/A
</td>
<td>
HTTP request returns 200
</td>
<td>
Q <sub>ret</sub>
</td>
<td>
HTTP request returns 200 (A)
</td>
</tr>

<!-- A1.1 -->
<tr class="even">
<td>
A1.1 the protocol is open, free, and universally implementable
</td>
<td>
The resolution protocol is universally implementable with an open protocol
</td>
<td>
Accomplished if protocol is HTTP
</td>
<td>
Q <sub>ret</sub>
</td>
<td>
Accomplished if protocol is HTTP (A)
</td>
</tr>

<!-- A1.2 -->
<tr class="odd">
<td>
A1.2 the protocol allows for an authentication and authorization procedure, where necessary
</td>
<td>
The resolution protocol supports authentication and authorization for access to restricted content
</td>
<td>
Accomplished if protocol is HTTP
</td>
<td>
Q <sub>ret</sub>
</td>
<td>
Accomplished if protocol is HTTP  (A)
</td>
</tr>

<!-- A2 -->
<tr class="even">
<td>
A2. metadata are accessible, even when the data are no longer available
</td>
<td>
There is a policy for metadata
</td>
<td>
Repository has a clear policy statement
</td>
<td>
N/A
</td>
<td>
"data availability policy" is completed in *registry* metadata (A)
</td>
</tr>

<!-- I1 -->
<tr class="odd">
<td>
I1. (meta)data use a formal, accessible, shared, and broadly applicable language for knowledge representation
</td>
<td>
If hash-style metadata (e.g. JSON) or Linked Data are found, pass
</td>
<td>
Metadata is structured (e.g. Dublin Core)
</td>
<td>
Pass
</td>
<td>
*Dataset* metadata is structured (e.g. xml) (M)
</td>
</tr>

<!-- I2 -->
<tr class="even">
<td>
I2. (meta)data use vocabularies that follow FAIR principles
</td>
<td>
(meta)data uses vocabularies that are, themselves, FAIR
</td>
<td>
N/A
</td>
<td>
N/A
</td>
<td>
N/A
</td>
</tr>

<!-- I3 -->
<tr class="odd">
<td>
I3. (meta)data include qualified references to other (meta)data
</td>
<td>
Metadata contain links that are not from the same source (domain/host)
</td>
<td>
Links to publications and terms definitions
</td>
<td>
N/A
</td>
<td>
*Dataset* metadata includes reference to other dataset IDs (A)
</td>
</tr>

<!-- R1 -->
<tr class="even">
<td>
R1. meta(data) are richly described with a plurality of accurate and relevant attributes
</td>
<td>
N/A
</td>
<td>
Metadata provide information on how to reuse a dataset
</td>
<td>
Q <sub>geo</sub>, Q <sub>chrono</sub>
</td>
<td>
*Dataset* metadata contain more information than search keywords (F2) (A)
</td>
</tr>

<!-- R1.1 -->
<tr class="odd">
<td>
R1.1. (meta)data are released with a clear and accessible data usage license
</td>
<td>
Metadata contains a pointer to the data license
</td>
<td>
Metadata license is present
</td>
<td>
Q <sub>lic</sub>
</td>
<td>
"datalicensename" and "datalicenseulr" are filled in *registry* metadata (A)
</td>
</tr>

<!-- R1.2 -->
<tr class="even">
<td>
R1.2. (meta)data are associated with detailed provenance
</td>
<td>
N/A
</td>
<td>
Documentation on how data was created
</td>
<td>
N/A
</td>
<td>
"authors", "email" and "title" are filled in *dataset* metadata (A)
</td>
</tr>

<!-- R1.3 -->
<tr class="odd">
<td>
R1.3. (meta)data meet domain-relevant community standards
</td>
<td>
N/A
</td>
<td>
N/A
</td>
<td>
N/A
</td>
<td>
N/A
</td>
</tr>

</tbody>
</table>


### Visualizing FAIR maturity indicators
To summarize and compare the outputs of our calculation, we created a balloon plots using the R library ggplot2 [@doi:10.1007/978-0-387-98141-3].  
In the graph, each row corresponds to a user-case and each column to FAIR maturity indicator.
The size of each shape is the value of a specific FAIR maturity indicator for a particular dataset.
Squares represent maturity indicators determined manually, circles are for maturity indicators established automatically, and crosses for not computed maturity indicators.
Finally, colors represent a group of principles of the acronym: blue for findable, red for accessible, green for interoperable, and orange for reusable.
We used grey for non evaluated metrics.


<!--
|                                                                                                               | Wilkinson [@url:https://github.com/FAIRMetrics/Metrics/tree/master/MaturityIndicators/Gen2]              | Dunning [@tag:tag_dunning]                                                  | Weber [@tag:tag_weber]                                 | Our approach                                      |                 
|---------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|--------------------------------------------------------|---------------------------------------------------|
| F1: (meta)data are assigned a globally unique and persistent identifier                                       | The GUID matches a scheme that is globally unique and persistent in FAIRsharing                          | Persistent identifier is DOI or similar                                     | Pass                                                   | Information from re3data *                        |
| F2: data are described with rich metadata (defined by R1 below)                                               | Metadata contains "structured" elements (micrograph, JSON) or linked data (JSON-LD, RDFa)                | Title, creator, date, contributors, keywords, temporal and spatial coverage | Q <sub>geo</sub>, Q <sub>chrono</sub>                  | Search keywords are in metadata                   |
| F3: metadata clearly and explicitly include the identifier of the data it describes                           | Metadata contains both its own GUID and the data GUID                                                    | DOI of data is in metadata                                                  | Pass                                                   | Metadata contains dataset ID found with search    |            
| F4: (meta)data are registered or indexed in a searchable resource                                             | The digital resource can be found using web-based search engines                                         | Dataset title searched in google.com or duckduckgo.com                      | Pass                                                   | Dataset title searched in [Google Dataset Search](https://toolbox.google.com/datasetsearch)|
| A.1 (meta)data are retrievable by their identifier using a standardized communications protocol               | -                                                                                                        | If HTTP, pass                                                               | Q <sub>ret</sub>                                       | HTTP request returns 200                          |                                                                                    |
| A1.1 the protocol is open, free, and universally implementable                                                | The resolution protocol is universally implementable with an open protocol                               | If HTTP, pass                                                               | Q <sub>ret</sub>                                       | Included in A.1                                   |
| A1.2 the protocol allows for an authentication and authorization procedure, where necessary                   | The resolution protocol supports authentication and authorization for access to restricted content       | If HTTP, pass                                                               | Q <sub>ret</sub>                                       | Included in A.1                                   |
| A2. metadata are accessible, even when the data are no longer available                                       | There is a policy for metadata | Repository has a clear policy statement                                 | -                                                                           | Manual check or on re3data                             | Asked to repositories *                           |
| I1. (meta)data use a formal, accessible, shared, and broadly applicable language for knowledge representation | If hash-style metadata (e.g. JSON) or Linked Data are found, pass                                        | Metadata is structured (e.g. Dublin Core)                                   | Pass                                                   | Metadata are in a defined structure *             |
| I2. (meta)data use vocabularies that follow FAIR principles                                                   | (meta)data uses vocabularies that are, themselves, FAIR                                                  | -                                                                           | -                                                      | -                                                 |
| I3. (meta)data include qualified references to other (meta)data                                               | Metadata contain links that are not from the same source (domain/host)                                   | Links to publications and terms definitions                                 | -                                                      | Metadata includes reference to other dataset IDs  |
| R1. meta(data) are richly described with a plurality of accurate and relevant attributes                      | -                                                                                                        | Metadata provide information on how to reuse a dataset                      | Q <sub>geo</sub>, Q <sub>chrono</sub>                  | TBD      |
| R1.1. (meta)data are released with a clear and accessible data usage license                                  | Metadata contains a pointer to the data license                                                          | Metadata license is present                                                 | Q <sub>lic</sub> | Check on re3data.org                | Information from re3data *                        |
| R1.2. (meta)data are associated with detailed provenance                                                      | -                                                                                                        | Documentation on how data was created                                       | -                                                      | Author name, email address, publication           |
| R1.3. (meta)data meet domain-relevant community standards                                                     | -                                                                                                        | -                                                                           | -                                                      | -                                                 |

Table: FAIR maturity indicators. In our approach, manual procedures are labelled with \*.  
Acronyms: GUID = Globally Unique IDentifier.
{#tbl:maturity_indicators}

-->
